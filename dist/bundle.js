(()=>{"use strict";var e=function(e){var t=e.target;if(t.matches("input"))switch(t.closest("#calc")&&(t.value=t.value.replace(/\D/g,"")),!0){case t.matches('input[name="user_name"]'):t.value=t.value.replace(/[^а-яё\-\s]/gi,"");break;case t.matches('input[name="user_message"]'):t.value=t.value.replace(/[^а-яё\-\s.,:!?()]/gi,"");break;case t.matches('input[type="email"]'):t.value=t.value.replace(/[^a-z\d\-@_.!~*']/gi,"");break;case t.matches('input[type="tel"]'):t.value=t.value.replace(/[^\d+]/g,"")}},t=function(e){if(e.target.matches("input")){var t=e.target,n=t.value;n=(n=(n=n.trim()).replace(/\s{2,}/g," ")).replace(/-{2,}/g,"-"),t.matches(".form-name, #form2-name")&&(n=n.replace(/[а-яё]+/gi,(function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}))),t.value=n}};function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var o,a,r,c,i,s,u,l,m,d,v,f,p,h,g,y,b,L,S,q,E,k,A,w,C,T,F;w=document.querySelector("#timer-hours"),C=document.querySelector("#timer-minutes"),T=document.querySelector("#timer-seconds"),(F=function(){var e,t,n,o=(e=(new Date("21 august 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});o.timeRemaining>0&&(w.textContent=o.hours<10?"0".concat(o.hours):o.hours,C.textContent=o.minutes<10?"0".concat(o.minutes):o.minutes,T.textContent=o.seconds<10?"0".concat(o.seconds):o.seconds)})(),setInterval(F,1e3),A=document.querySelector("menu"),document.body.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")&&(t=t.closest(".menu")),t.matches("menu li a")||t.matches("menu .close-btn")||t.matches(".menu")?A.classList.toggle("active-menu"):!t.closest("menu")&&A.classList.contains("active-menu")&&A.classList.remove("active-menu")})),L=document.querySelector(".popup"),S=L.querySelector(".popup-content"),q=document.querySelector("#service-block"),E=0,k=function e(){b=requestAnimationFrame(e),++E<11?S.style.top="".concat(E,"%"):(cancelAnimationFrame(b),E=0)},q.addEventListener("click",(function(e){e.target.matches(".popup-btn")&&(L.style.display="block",document.documentElement.clientWidth>=768&&(b=requestAnimationFrame(k)))})),L.addEventListener("click",(function(e){var t=e.target;t.matches(".popup-close")?L.style.display="none":(t=t.closest(".popup-content"))||(L.style.display="none")})),document.body.addEventListener("click",(function(e){var t,n=e.target;n.closest('main a[href="#service-block"]')&&(n=n.closest('main a[href="#service-block"]')),y=n.getAttribute("href"),(n.matches("menu li a")||n.matches('main a[href="#service-block"]'))&&(e.preventDefault(),t=document.querySelector(y).getBoundingClientRect().top,window.scrollTo({left:0,top:t+pageYOffset,behavior:"smooth"}))})),p=document.querySelector(".service-header"),h=p.querySelectorAll(".service-header-tab"),g=document.querySelectorAll(".service-tab"),p.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&h.forEach((function(e,n){e===t&&function(e){for(var t=0;t<g.length;t++)e===t?(h[t].classList.add("active"),g[t].classList.remove("d-none")):(h[t].classList.remove("active"),g[t].classList.add("d-none"))}(n)}))})),i=document.querySelector(".portfolio-content"),s=document.querySelectorAll(".portfolio-item"),u=document.querySelector(".portfolio-dots"),l=0,m=function(e,t,n){e[t].classList.remove(n)},d=function(e,t,n){e[t].classList.add(n)},v=function(){m(s,l,"portfolio-item-active"),m(c,l,"dot-active"),++l>=s.length&&(l=0),d(s,l,"portfolio-item-active"),d(c,l,"dot-active")},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;r=setInterval(v,e)},i.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(m(s,l,"portfolio-item-active"),m(c,l,"dot-active"),t.matches("#arrow-right")?l++:t.matches("#arrow-left")?l--:t.matches(".dot")&&c.forEach((function(e,n){e===t&&(l=n)})),l>=s.length&&(l=0),l<0&&(l=s.length-1),d(s,l,"portfolio-item-active"),d(c,l,"dot-active"))})),i.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(r)})),i.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&f()})),s.forEach((function(e,t){var n=document.createElement("li");n.classList.add("dot"),0===t&&n.classList.add("dot-active"),u.append(n)})),c=document.querySelectorAll(".dot"),f(),function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),a=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),i=document.getElementById("total"),s=!1,u=function(){var n=0,u=1,l=1,m=0,d=o.options[o.selectedIndex].value,v=+a.value;r.value>1&&(u+=(r.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),d&&v&&(n=t*d*v*u*l);var f=0,p=Math.floor(n/60),h=n%60;m=n,s||cancelAnimationFrame(e),s=!0,e=requestAnimationFrame((function t(){e=requestAnimationFrame(t),s&&n>0&&m>0?m>h?(f+=1*p,i.textContent=f,m-=p):(i.textContent=n,m=0,cancelAnimationFrame(e)):cancelAnimationFrame(e)}))};n.addEventListener("change",(function(e){e.target.matches("select, input")&&(s=!1,i.textContent="",u())}))}(100),(a=document.getElementById("command")).addEventListener("mouseover",(function(e){var t=e.target;if(t.matches("img.command__photo")){var n=[t.dataset.img,t.src];t.src=n[0],t.dataset.img=n[1]}})),a.addEventListener("mouseout",(function(e){var t=e.target;if(t.matches("img.command__photo")){var n=[t.dataset.img,t.src];t.src=n[0],t.dataset.img=n[1]}})),document.body.addEventListener("input",e),document.body.addEventListener("blur",t,!0),(o=document.createElement("div")).style.color="#fff",o.style.marginTop="1rem",document.body.addEventListener("submit",(function(e){if(e.target.closest("form")){e.preventDefault();var t=e.target;t.append(o),o.innerHTML='<div class="sk-double-bounce">\n        <div class="sk-child sk-double-bounce-1"></div>\n        <div class="sk-child sk-double-bounce-2"></div>\n      </div>';var a=new FormData(t),r={};a.forEach((function(e,t){r[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(r).then((function(e){if(200!==e.status)throw new Error("status is not 200");o.innerHTML="Спасибо! Мы скоро с вами свяжемся!";var a,r=function(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,c=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw c}}}}(t.elements);try{for(r.s();!(a=r.n()).done;){var c=a.value;"button"!==c.tagName.toLowerCase()&&"button"!==c.type&&(c.value="")}}catch(e){r.e(e)}finally{r.f()}})).catch((function(e){o.innerHTML="Что-то пошло не так...",console.error(e)}))}}))})();